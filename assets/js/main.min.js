const isLocalhost=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)||""===window.location.hostname);let apiUrl=isLocalhost?"http://localhost:3000":"https://orinoco.abcoding.fr/";const cardContainer=document.getElementById("card-container"),itemNumberNav=document.getElementById("item-number-nav"),pageTitle=document.getElementById("title"),item=document.getElementById("item"),itemContainer=document.getElementById("item-container"),selectColor=document.getElementById("select-color"),btnAddToCart=document.getElementById("btnAddToCart"),order=document.getElementById("order"),orderContainer=document.getElementById("order-container"),main=document.getElementById("main"),cart=document.getElementById("cart"),cartContainer=document.getElementById("cart-container"),orderForm=document.getElementById("order-form"),couponForm=document.getElementById("coupon-form"),btnCoupon=document.getElementById("btn-coupon"),btnOrder=document.getElementById("btn-order"),firstName=document.getElementById("firstName"),lastName=document.getElementById("lastName"),email=document.getElementById("email"),address=document.getElementById("address"),city=document.getElementById("city"),zip=document.getElementById("zip"),ccName=document.getElementById("cc-name"),ccNumber=document.getElementById("cc-number"),ccExpiration=document.getElementById("cc-expiration"),ccCVV=document.getElementById("cc-cvv");let totalPrice=0,products=[];const numberItemInCartNav=()=>{0!==localStorage.length&&(itemNumberNav.textContent=localStorage.length)},newElement=(type,parent,attributes,...contents)=>{const element=document.createElement(type);for(key in parent.appendChild(element),attributes)element.setAttribute(key,attributes[key]);return contents.forEach(content=>{"string"==typeof content?element.appendChild(document.createTextNode(content)):element.appendChild(content)}),element},newValue=(id,attributes,textContent)=>{const element=document.getElementById(id);for(key in attributes)element.setAttribute(key,attributes[key]);return element.textContent=textContent,element},removeItem=item=>{localStorage.removeItem(item),document.location.href="cart.html"},sendFormData=data=>{fetch(`${apiUrl}/api/teddies/order`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(data)}).then(response=>{response.ok?response.json().then(responseData=>{sessionStorage.setItem("order_id",responseData.orderId),sessionStorage.setItem("firstName",firstName.value),sessionStorage.setItem("lastName",lastName.value),sessionStorage.setItem("address",address.value),sessionStorage.setItem("city",city.value),sessionStorage.setItem("zip",zip.value),window.location.href="order-confirmed.html"}):Promise.reject(response.status)}).catch(error=>console.log(error))},auto_format=(value,firstQuantifier,secondQuantifier,character)=>{var v=value.replace(/\s+/g,"").replace(/[^0-9]/gi,""),regex=new RegExp("\\d{"+firstQuantifier+","+secondQuantifier+"}","g"),matches=v.match(regex),match=matches&&matches[0]||"",parts=[];for(i=0,len=match.length;i<len;i+=firstQuantifier)parts.push(match.substring(i,i+firstQuantifier));return parts.length?parts.join(character):value},clearLocalStorage=()=>{localStorage.clear(),sessionStorage.clear()};numberItemInCartNav();