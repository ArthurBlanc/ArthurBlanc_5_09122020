if(localStorage.length){for(let i=0;i<localStorage.length;i++){let data=JSON.parse(localStorage.getItem(localStorage.key(i)));products.push(data.id),totalPrice+=parseInt(data.priceForAll),sessionStorage.setItem("orderTotalPrice",totalPrice);const itemNumber=newValue("item-number",{},localStorage.length),totalPriceInCart=newValue("total-price",{},totalPrice+" €"),cartLi=newElement("li",cartContainer,{class:"list-group-item d-flex justify-content-between lh-condensed"}),liBody=newElement("div",cartLi,{}),cartItemTitle=newElement("h3",liBody,{class:"my-0 h6"}),cartItemLink=newElement("a",cartItemTitle,{href:"item.html?id="+data.id},data.name),cartItemDetails=newElement("small",liBody,{class:"text-muted"},data.pricePerUnit+" € x"+data.quantity+" "+data.colorSelected),cartItemPriceForAll=newElement("span",cartLi,{class:"text-muted"},data.priceForAll+" €"),cartButtonRemoveItem=newElement("button",cartItemPriceForAll,{type:"button",class:"close","aria-label":"Close",onclick:"removeItem('"+data.id+data.colorSelected+"')"}),cartButtonRemoveItemAria=newElement("span",cartButtonRemoveItem,{"aria-hidden":"true"});cartButtonRemoveItemAria.innerHTML+="&times;"}btnCoupon.addEventListener("click",(function(){couponForm.classList.add("was-validated")})),onload=function(){ccNumber.oninput=function(){this.value=auto_format(this.value,4,16," ")},ccExpiration.oninput=function(){this.value=auto_format(this.value,2,4,"/")}},btnOrder.addEventListener("click",(function(){orderForm.classList.add("was-validated")})),orderForm.addEventListener("submit",(function(e){e.preventDefault();const nameRegex=/^[A-Za-zÀ-ÖØ-öø-ÿ,.'-\s]{1,128}$/,emailRegex=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,addressRegex=/^[A-Za-zÀ-ÖØ-öø-ÿ,.'-\s]{2,255}$/,cityRegex=/^[A-Za-zÀ-ÖØ-öø-ÿ,.'-\s]{2,}$/,zipRegex=/(?=^.{5}$)^((([0-8][0-9])|(9[0-5,7])|(2[abAB]))[0-9]{3})$/,fullNameRegex=/^[A-Za-zÀ-ÖØ-öø-ÿ,.'-\s]{2,255}$/,ccNumberRegex=/(?=^.{19}$)^((4\d{3})|(5[1-5]\d{2})|(6011)|(34\d{1})|(37\d{1}))-?\s?\d{4}-?\s?\d{4}-?\s?\d{4}|3[4,7][\d\s-]$/,ccExpirationRegex=/(?=^.{5}$)^(((0[1-9])|(1[0-2]))[\/\.\-]*((2[1-9])|(2[1-9])))/,ccCVVRegex=/^[0-9]{3}$/;var formValidated=!0;function validateInput(input,regex){const validated=regex.test(input.value);validated||(formValidated=!1)}if(validateInput(firstName,nameRegex),validateInput(lastName,nameRegex),validateInput(email,emailRegex),validateInput(address,addressRegex),validateInput(city,cityRegex),validateInput(zip,zipRegex),validateInput(ccName,fullNameRegex),validateInput(ccNumber,ccNumberRegex),validateInput(ccExpiration,ccExpirationRegex),validateInput(ccCVV,ccCVVRegex),!formValidated)return alert("Le formulaire n'est pas correctement validé"),!1;let contact,order={contact:{firstName:firstName.value,lastName:lastName.value,address:address.value,city:city.value,email:email.value},products:products};return sendFormData(order),!0}))}else{cart.remove();const emptyCartContainer=newElement("div",main,{class:"container"}),emptyCartRow=newElement("div",emptyCartContainer,{class:"row"}),emptyCartCol1=newElement("div",emptyCartRow,{class:"col-12 alert alert-danger text-center"}),emptyCartTitle=newElement("h1",emptyCartCol1,{class:"h2"},"Votre panier est vide"),emptyCartCo2=newElement("div",emptyCartCol1,{class:"col-12"}),emptyCartParagraph=newElement("p",emptyCartCo2,{class:"h3"}),emptyCartBackToHomepageLink=newElement("a",emptyCartParagraph,{href:"index.html"},"Retourner à l'accueil")}